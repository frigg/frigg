{% extends "base.html" %}

{% block js %}

    <link rel="stylesheet" href="{{ STATIC_URL }}js/highlight/styles/default.css">
    <script src="{{ STATIC_URL }}js/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

{% endblock js %}

{% block content %}

    <div class="row">

        <div class="col-lg-12">

            <div class="col-lg-8">
                <h3>{{ build.get_owner }}/{{ build.get_name }}</h3>
                <table>
                    <tr>
                        <td class="col-lg-1">Pull Requst</td>
                        <td class="col-lg-5">
                            <a href="{{ build.get_pull_request_url }}">Github</a>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-lg-1">Branch</td>
                        <td class="col-lg-5">{{ build.branch }}</td>
                    </tr>
                    <tr>
                        <td class="col-lg-1">Last commit</td>
                        <td class="col-lg-5">{{ build.sha }}</td>
                    </tr>
                </table>
            </div>

            {% if build.result %}
                <div class="col-lg-4">
                    <a href="{% url "deploy_master_branch" build.id %}">
                        <div class="btn btn-info">Deploy master branch</div>
                    </a>
                </div>
            {% endif %}

        </div>

        <div class="col-lg-12">
            {% if build.result %}
                <pre><code>{{ build.result.result_log }}</code></pre>
            {% else %}
                {% include "builds/loading.html" %}
                <pre><code>{{ build.testlog }}</code></pre>
            {% endif %}
        </div>
    </div>
{% endblock %}